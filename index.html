<!DOCTYPE html>
<html lang="en" style="width: 100%; height: 100%;">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>web-paint</title>
</head>
<body style="width: 100%; height: 100%; margin: 0px;">
    <style>
        button.tool {
            background-color: #4c5270;
            border: none;
            color: #ffffff;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }

        /* button.tool:hover {
            background-color: #0e86d4;
        } */

        button.activated_tool {
            background-color: #055c9d;
            border: none;
            color: #ffffff;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }

        /* button.activated_tool:hover {
            background-color: #68bbe3;
        } */

        h1 {
            font-size: 24px;
        }

        h2 {
            font-size: 20px;
        }

        /*
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        */

        .tool_bar {
            /*background-color: #055c9d;*/
            position: relative;
            top: 0;
            left: 0;

            width: 100%;
            height: 20%;
            min-height: 100px;
            min-width: 600px;
        }

        .tool_quick_access {
            position: relative;
            top: 0;
            left: 0;

            height: 15%;
            width: 100%;

            background-color: aqua;
        }

        .tool_category_selector {
            position: relative;
            top: 0;
            left: 0;

            height: 20%;
            width: 100%;
        }

        .tool {
            background-color: #ffffff;

            width: 5%;
            height: 100%;

            text-align: center;
            font-family: 'Times New Roman', Times, serif;
            font-size: 100%;

            float: left;
        }

        .tool_selected {
            background-color: #f5f6f7;

            width: 5%;
            height: 100%;

            text-align: center;
            font-family: 'Times New Roman', Times, serif;
            font-size: 100%;

            float: left;

            border-color: #dadbdc;
            border-style: solid;
            border-top-width: 1px;
            border-bottom-width: 0px;
            border-left-width: 1px;
            border-right-width: 1px;
        }

        .tool_menu {
            background-color: #f5f6f7;

            width: 100%;
            height: 65%;

            border-color: #dadbdc;
            border-style: solid;
            border-top-width: 1px;
            border-bottom-width: 1px;
            border-left-width: 0px;
            border-right-width: 0px;
        }

        .table_vertical_border {
            border-top: 0px;
            border-bottom: 0px;
            border-left: 0px;
            border-right: 1px;
            border-color: #dadbdc;
            border-style: solid;
            padding-right: 5px;
        }

        .table_vertical_border_2 {
            padding-left: 5px;
        }

        .palette_colours {
            float: left;

            /* background-color: red; */
            
            aspect-ratio: 1 / 1;
            height: 75%;

            border: 2px #ffffff;
            border-style: solid;

            outline: 1px;
            outline-color: #a0a0a0;
            outline-style: solid;

            margin: 2px;
        }

    </style>

    <div id="new_tool_bar" class="tool_bar">
        <div id="tool_quick_access" class="tool_quick_access"><!-- gets filled by js --></div>

        <div id="tool_category_selector" class="tool_category_selector"><!-- gets filled by js --></div>

        <div id="place_for_tool_menu" class="tool_menu">
            <!-- ids: e.g. "tool_Export", "tool_Import" -->

            <div id="tool_Export" hidden>

            </div>

            <div id="tool_Import" hidden>

            </div>

            <div id="tool_Canvas" hidden style="height: 100%;">
                <table style="height: 100%; border-collapse:collapse;">
                    <tr style="border:none;">
                        <td>
                            <input type="checkbox" id="show_grid" onclick="grid.toggle_grid()" checked="true">
                        </td>
                        <td class="table_vertical_border">
                            show grid
                        </td>
                        <td class="table_vertical_border_2">
                            grid thickness (in pixels):
                        </td>
                        <td>
                            <input type="number" value="1" id="grid_thickness">
                        </td>
                        <td class="table_vertical_border">
                            <button onclick="grid.apply_grid_thickness()">Apply</button>
                        </td>
                        <td class="table_vertical_border_2">
                            width:
                        </td>
                        <td>
                            <input type="number" id="canvas_w_input" value="50">
                        </td>
                        <td>
                            <button onclick="canvas.change_width()">Apply</button>
                        </td>
                    </tr>
                    <tr style="border:none;">
                        <td>
                            <input type="checkbox" id="show_outer_grid" onclick="grid.toggle_outer_grid()" checked="true">
                        </td>
                        <td class="table_vertical_border">
                            show outer grid
                        </td>
                        <td class="table_vertical_border_2">
                            pixels seperated (width):
                        </td>
                        <td>
                            <input type="number" value="10" id="px_sep_w">
                        </td>
                        <td class="table_vertical_border">
                            <button onclick="grid.redo_pixels_seperated_w()">Apply</button>
                        </td>
                        <td class="table_vertical_border_2">
                            height:
                        </td>
                        <td>
                            <input type="number" id="canvas_h_input" value="50">
                        </td>
                        <td>
                            <button onclick="canvas.change_height()">Apply</button>
                        </td>
                    </tr>
                    <tr style="border:none;">
                        <td>
                            <input type="checkbox" id="show_inner_grid" onclick="grid.toggle_inner_grid()" checked="true">
                        </td>
                        <td class="table_vertical_border">
                            show inner grid
                        </td>
                        <td class="table_vertical_border_2">
                            pixels seperated (height):
                        </td>
                        <td>
                            <input type="number" value="10" id="px_sep_h">
                        </td>
                        <td class="table_vertical_border">
                            <button onclick="grid.redo_pixels_seperated_h()">Apply</button>
                        </td>
                        <td class="table_vertical_border_2">
                            zoom:
                        </td>
                        <td>
                            <input type="number" value="10" id="canvas_zoom">
                        </td>
                        <td>
                            <button onclick="canvas.change_zoom()">Apply</button>
                        </td>
                    </tr>
                </table>
            </div>

            <div id="tool_Colour" hidden style="height: 100%;">
                <table style="width: auto; height: auto; float: left;">
                    <tr>
                        <td>
                            red:
                        </td>
                        <td>
                            <div id="colour_red"></div>
                        </td>
                        <td>
                            <input type="range" min="0" max="255" value="0" onchange="colour_mixer.update()" id="input_red" oninput="colour_mixer.update()" onkeypress="colour_mixer.update()">
                        </td>
                        <td id="colour_preview"></td>
                        <!-- <td id="palette_row_0" style="width: auto; height: auto;"></td> -->
                    </tr>
                    <tr>
                        <td>
                            green:
                        </td>
                        <td>
                            <div id="colour_green"></div>
                        </td>
                        <td>
                            <input type="range" min="0" max="255" value="0" onchange="colour_mixer.update()" id="input_green" oninput="colour_mixer.update()" onkeypress="colour_mixer.update()">
                        </td>
                        <td id="rgb"></td>
                        <!-- <td id="palette_row_1" style="width: auto; height: auto;"></td> -->
                    </tr>
                    <tr>
                        <td>
                            blue:
                        </td>
                        <td>
                            <div id="colour_blue"></div>
                        </td>
                        <td>
                            <input type="range" min="0" max="255" value="0" onchange="colour_mixer.update()" id="input_blue" oninput="colour_mixer.update()" onkeypress="colour_mixer.update()">
                        </td>
                        <td id="hex"></td>
                        <!-- <td id="palette_row_2" style="width: auto; height: auto;"></td> -->
                    </tr>
                    <tr style="visibility: hidden; height: 0px;">
                        <td></td>
                        <td>255</td>
                        <td></td>
                        <td>rgb(255,255,255)</td>
                    </tr>
                </table>

                <div style="float: left; height: 100%; width: 50%;">
                    <div id="palette_row_0" style="width: 100%; height: 30%; float: left;"></div>
                    <div id="palette_row_1" style="width: 100%; height: 30%; float: left;"></div>
                    <div id="palette_row_2" style="width: 100%; height: 30%; float: left;"></div>
                </div>

                <table>
                    <tr>
                        <td>
                            rgb
                        </td>
                        <td>
                            <div id="background_rgb_display"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            hex
                        </td>
                        <td>
                            <div id="background_hex_display"></div>
                        </td>
                    </tr>
                </table>

                <div>
                    <button onclick="canvas.change_colour()">Use from colour mixer</button>
                    <br>
                    <input type="checkbox">
                    transparent background (only noticable when image is exported)
                </div>
            </div>

            <div id="tool_Layers" hidden></div>
        </div>
    </div>

    <div id="tool_bar"></div>

    <div id="tools">
        <div id="colour mixer" hidden>
            <h1>
                colour mixer
            </h1>
            
            

            <hr>
        </div>

        <div id="size" hidden>
            <h1>
                size
            </h1>

            <table>
                <tr>
                    
                </tr>
                <tr>
                    
                </tr>
            </table>

            <hr>
        </div>

        <div id="zoom" hidden>
            <h1>
                zoom
            </h1>


            <hr>
        </div>

        <div id="background colour" hidden>
            <h1>
                background colour
            </h1>

            

            

            <hr>
        </div>

        <div id="grid settings" hidden>
            <h1>
                grid settings
            </h1>

            
            

            <hr>
        </div>

        <div id="layers" hidden>
            <button onclick="layers.create_layer()">Create new Layer</button>
            <table id="layers_table"></table>
        </div>
    </div>

    <div id="canvas">
        <div id="layer_imgs"></div>

        <div id="grid">
            <div id="inner_grid">
                <div id="horizontal_grid"></div>
                <div id="vertical_grid"></div>
            </div>
        </div>
    </div>

    <div id="outer_grid"></div>

    <script type="text/javascript">
        /**
        white
        #ffffff

        Tiffany Blue
        #bcece0

        Cyan
        #36eee0

        Hot Pink
        #f652a0

        Cornflower
        #4c5270
        */
        
        class Canvas {
            constructor() {
                this.canvas                 = document.getElementById("canvas");
                this.background_rgb_display = document.getElementById("background_rgb_display");
                this.background_hex_display = document.getElementById("background_hex_display");
        
                this.width_input     = document.getElementById("canvas_w_input");
                this.height_input    = document.getElementById("canvas_h_input");
                this.zoom_input      = document.getElementById("canvas_zoom");
        
                this.width      = 50;
                this.height     = 50;
                this.bg_colour  = "#000000";
                this.zoom       = 10;
            }

            change_width() {
                this.width = Number(this.width_input.value);
                this.apply_changes();
                grid.redo_grid();
            }

            change_height() {
                this.height = Number(this.width_input.value);
                this.apply_changes();
                grid.redo_grid();
            }

            change_zoom() {
                this.zoom = Number(this.zoom_input.value);
                this.apply_changes();
                grid.redo_grid();
            }

            change_colour() {
                let r = colour_mixer.rgb_value.textContent;
                let h = colour_mixer.hex_value.textContent;
            
                this.bg_colour = h;
            
                this.background_rgb_display.textContent = r;
                this.background_hex_display.textContent = h;
            
                this.apply_changes();
            }
        
            apply_changes() {
                this.canvas.style = "background-color: " + this.bg_colour + "; height: " + this.height + "px; width: " + this.width + "px; transform: scale(" + this.zoom + "); transform-origin: 0% 0% 0px;";
            }
        }

        class Tool {
            constructor() {
                this.tool_bar = document.getElementById("tool_bar");
                this.tools = ["colour mixer", "size", "zoom", "background colour", "grid settings", "layers"];
            }
            
            toggle_tool(to) {
                let e = document.getElementById(to);
                e.hidden = !e.hidden;
            }
        }

        class ColourMixer{
            constructor() {
                this.rgb_display = [
                    document.getElementById("colour_red"),
                    document.getElementById("colour_green"),
                    document.getElementById("colour_blue")
                ];
                this.rgb_input = [
                    document.getElementById("input_red"),
                    document.getElementById("input_green"),
                    document.getElementById("input_blue")
                ];
                this.rgb_value      = document.getElementById("rgb");
                this.hex_value      = document.getElementById("hex");
                this.colour_preview = document.getElementById("colour_preview");
            }
        
            component_to_hex(c) {
                // https://www.w3docs.com/snippets/javascript/how-to-convert-rgb-to-hex-and-vice-versa.html
        
                let hex = c.toString(16);
                return hex.length == 1 ? "0" + hex : hex;
            }
        
            update() {
                let r = this.rgb_input[0].value;
                let g = this.rgb_input[1].value;
                let b = this.rgb_input[2].value;
        
                this.rgb_display[0].textContent = r;
                this.rgb_display[1].textContent = g;
                this.rgb_display[2].textContent = b;
        
                this.rgb_value.textContent = "rgb(" + r + ", " + g + ", " + b + ")";
                this.hex_value.textContent = "#" + this.component_to_hex(Number(r)) + this.component_to_hex(Number(g)) + this.component_to_hex(Number(b));
                this.colour_preview.style = "background-color: " + this.hex_value.textContent + ";";
            }
        }

        class Grid {
            constructor() {
                this.grid               = document.getElementById("grid");
                this.outer_grid         = document.getElementById("outer_grid");
                this.inner_grid         = document.getElementById("inner_grid");
                this.horizontal_grid    = document.getElementById("horizontal_grid");
                this.vertical_grid      = document.getElementById("vertical_grid");
        
                this.show_grid              = document.getElementById("show_grid");
                this.show_inner_grid        = document.getElementById("show_inner_grid");
                this.show_outer_grid        = document.getElementById("show_outer_grid");
                this.grid_thickness_input   = document.getElementById("grid_thickness");
                this.px_sep_w               = document.getElementById("px_sep_w");
                this.px_sep_h               = document.getElementById("px_sep_h");
        
                this.grid_thickness      = Number(this.grid_thickness_input.value);
                this.horizontal_lines    = [];
                this.vertical_lines      = [];
                this.pixels_seperated_w  = Number(this.px_sep_w.value);
                this.pixels_seperated_h  = Number(this.px_sep_w.value);
            }
        
            toggle_grid() {
                this.grid.hidden = !this.show_grid.checked;
            }
        
            toggle_outer_grid() {
                this.outer_grid.hidden = !this.show_outer_grid.checked;
            }
            
            toggle_inner_grid() {
                this.inner_grid.hidden = !this.show_inner_grid.checked;
            }
        
            remove_horizontal_lines() {
                for (let i = 0; i < this.horizontal_lines.length; i++) {
                    this.horizontal_lines[i].remove();
                }
                this.horizontal_lines = [];
            }
            
            remove_vertical_lines() {
                for (let i = 0; i < this.vertical_lines.length; i++) {
                    this.vertical_lines[i].remove();
                }
                this.vertical_lines = [];
            }
        
            add_horizontal_lines() {
                for (let i = this.pixels_seperated_h * canvas.zoom; i < (canvas.height * canvas.zoom); i = i + this.pixels_seperated_h * canvas.zoom) {
                    console.log(this.grid_thickness);
                    let x = document.createElement("div");
                    x.style = "background-color: #000000; width: " + canvas.width * canvas.zoom + "px; height: " + this.grid_thickness + "px; position: absolute; top: " + i + "px;";
                    this.horizontal_grid.appendChild(x);
                    this.horizontal_lines.push(x);
                }
            }
            
            add_vertical_lines() {
                for (let i = this.pixels_seperated_w * canvas.zoom; i < (canvas.width * canvas.zoom); i = i + this.pixels_seperated_w * canvas.zoom) {
                    let x = document.createElement("div");
                    x.style = "background-color: #000000; height: " + canvas.height * canvas.zoom + "px; width: " + this.grid_thickness + "px; position: absolute; left: " + i + "px;";
                    this.vertical_grid.appendChild(x);
                    this.vertical_lines.push(x);
                }
            }
        
            apply_grid_thickness() {
                this.grid_thickness = Number(this.grid_thickness_input.value);
                this.redo_grid();
            }
            
            redo_pixels_seperated_w() {
                this.pixels_seperated_w = Number(this.px_sep_w.value);
                this.redo_grid();
            }
            
            redo_pixels_seperated_h() {
                this.pixels_seperated_h = Number(this.px_sep_h.value);
                this.redo_grid();
            }
            
            redo_grid() {
                this.remove_horizontal_lines();
                this.remove_vertical_lines();
                this.add_horizontal_lines();
                this.add_vertical_lines();
                this.grid.style = "transform: scale(" + 1 / canvas.zoom + "); transform-origin: 0% 0% 0px;";
            }
        }

        class Layer {
            constructor(id) {
                this.pixels = [];
                this.id = id;
                this.layer = document.createElement("div");
                let l = document.getElementById("layer_imgs");

                for (let i = 0; i < canvas.width; i++) {
                    let sublist = [];
                    for (let j = 0; j < canvas.height; j++) {
                        let x = document.createElement("div");
                        x.style = "height: 1px; width: 1px; position: absolute; top: " + i + "px; left: " + j+ "px;";
                        sublist.push(x);
                        this.layer.appendChild(x);
                    }
                    this.pixels.push(sublist);
                }

                l.appendChild(this.layer);
            }
        }

        class Layers {
            constructor() {
                this.layer_gui_table    = document.getElementById("layers_table");
                this.layer_imgs         = document.getElementById("layer_imgs");
        
                this.layer_count    = 0;
                this.layer_table    = [];
                this.layer_objects  = [];
                this.current_layer  = 0;
            }

            create_layer() {
                let l = new Layer(this.layer_count);
                this.layer_objects.push(l);
                let layer_gui = document.createElement("td");

                // layer name
                let layer_name = document.createElement("div");
                let name_input = document.createElement("input");
                name_input.value = "Layer: " + this.layer_count;
                layer_name.appendChild(name_input);
                layer_gui.appendChild(layer_name);

                // hide button
                let toggle_visability = document.createElement("div");
                let visability_text = document.createElement("div");
                visability_text.textContent = "visible: ";
                let visability_checkbox = document.createElement("input");
                visability_checkbox.type = "checkbox";
                visability_checkbox.checked = true;
                visability_checkbox.onclick = () => {
                    l.layer.hidden = !l.layer.hidden;
                };
                toggle_visability.appendChild(visability_text);
                toggle_visability.appendChild(visability_checkbox);
                layer_gui.appendChild(toggle_visability);

                // select button
                let select_button = document.createElement("button");
                select_button.textContent = "Select";
                select_button.onclick = () => {
                    this.layer_table[this.current_layer].style.backgroundColor = "";
                    this.current_layer = l.id;
                    layer_gui.style.backgroundColor = "#f652a0";
                };
                layer_gui.appendChild(select_button);

                // delete button
                let delete_button = document.createElement("button");
                delete_button.textContent = "Delete";
                delete_button.onclick = () => {
                    let x = this.layer_objects[l.id];
                    x.layer.remove()
                    this.layer_objects[l.id] = null;

                    x = this.layer_table[l.id];
                    x.remove();
                    this.layer_table[l.id] = null;

                    if (this.current_layer == l.id) {
                        for (let i = 0; i < this.layer_objects.length; i++) {
                            if (this.layer_objects[i] != null) {
                                this.current_layer = i;
                                this.layer_table[this.current_layer].style.backgroundColor = "#f652a0";
                                return;
                            }
                        }
                        this.current_layer = this.layer_count;
                        this.create_layer();
                    }
                };
                layer_gui.appendChild(delete_button);

                this.layer_table.push(layer_gui);
                this.layer_gui_table.appendChild(layer_gui);

                this.layer_table[this.current_layer].style.backgroundColor = "";
                layer_gui.style.backgroundColor = "#f652a0";
                
                this.current_layer = this.layer_count;
                this.layer_count++;
            }
        }

        class BackgroundColourHistory {
            constructor() {
                this.history_element = null;
            }
        }

        class ToolMenu {
            constructor() {
                this.QUICK_ACCESS_ELEMENT       = document.getElementById("tool_quick_access");
                this.CATEGORY_SELECTOR_ELEMENT  = document.getElementById("tool_category_selector");
                this.TOOL_MENU_ELEMENT          = document.getElementById("place_for_tool_menu");

                this.TOOL_IDS               = ["Import", "Export", "Canvas", "Colour", "Layers"];
                this.TOOL_BUTTONS_ELEMENTS  = [];
                this.TOOL_ELEMENTS          = [];

                this._setup_tools();

                this.current_tool = 0;

                this.TOOL_BUTTONS_ELEMENTS[0].click();
            }

            _setup_tools() {
                for (let i = 0; i < this.TOOL_IDS.length; i++) {
                    // get tool name
                    let id = this.TOOL_IDS[i];

                    // get tool element
                    let tool_element = document.getElementById("tool_" + id);
                    this.TOOL_ELEMENTS.push(tool_element);

                    // create button
                    let btn = document.createElement("div");
                    btn.textContent = id;
                    btn.className = "tool";
                    btn.onclick = () => {
                        // change previous apperance
                        this.TOOL_BUTTONS_ELEMENTS[this.current_tool].className = "tool";
                        this.TOOL_ELEMENTS[this.current_tool].hidden = true;

                        // change own apperance
                        btn.className = "tool_selected";
                        tool_element.hidden = false;

                        // change current tool
                        this.current_tool = i;
                    };
                    this.CATEGORY_SELECTOR_ELEMENT.appendChild(btn);
                    this.TOOL_BUTTONS_ELEMENTS.push(btn);
                }
            }
        }

        class Palette{
            constructor() {
                this.ROW_ELEMENTS = [];
                this.AMOUNT_ROWS  = 3;
                this.AMOUNT_COLUMNS = 20;

                for (let i = 0; i < this.AMOUNT_ROWS; i++) {
                    this.ROW_ELEMENTS.push(document.getElementById("palette_row_" + i));
                    console.log(this.ROW_ELEMENTS[i]);
                    for (let j = 0; j < this.AMOUNT_COLUMNS; j++) {
                        let x = document.createElement("div");
                        x.className = "palette_colours";
                        this.ROW_ELEMENTS[i].appendChild(x);
                    }
                }
            }
        }

        const canvas        = new Canvas();
        const tools         = new Tool();
        const colour_mixer  = new ColourMixer();
        const grid          = new Grid();
        const layers        = new Layers();

        const tool_menu     = new ToolMenu();
        const palette       = new Palette();

        //
        // drawing
        // 

        function draw(canvas, event) {
            const rect = canvas.canvas.getBoundingClientRect();
            let x = (event.clientX - rect.left) / canvas.zoom;
            x = Math.floor(x);
            let y = (event.clientY - rect.top) / canvas.zoom;
            y = Math.floor(y);
            console.log("x: " + x + " y: " + y);

            let layer = layers.layer_objects[layers.current_layer];
            if (!layer.layer.hidden) {
                let pixel = layer.pixels[y][x].style.backgroundColor = colour_mixer.hex_value.textContent;
            }
        }

        //
        // - setup
        //

        function setup() {
            // colour mixer
            colour_mixer.update();

            // canvas
            canvas.change_width();
            canvas.change_height();
            canvas.change_zoom();
            canvas.change_colour();
            canvas.apply_changes();
            canvas.canvas.addEventListener('mousedown', function(e) {
                draw(canvas, e);
            });

            // add tool bar buttons
            for (let i = 0; i < tools.tools.length; i++) {
                let t = tools.tools[i];
                let x = document.createElement("button");

                let f1 = () => {
                    // console.log(t);
                    tools.toggle_tool(t);
                    x.className = "activated_tool";
                    x.onclick = f2;
                };
                let f2 = () => {
                    // console.log(t);
                    tools.toggle_tool(t);
                    x.className = "tool";
                    x.onclick = f1;
                };
                x.onclick = f1;
                x.textContent = t;
                x.className = "tool";

                tools.tool_bar.appendChild(x);
            }

            // grid
            grid.toggle_grid();
            grid.toggle_inner_grid();
            grid.toggle_outer_grid();
            grid.redo_grid();

            // layers
            layers.create_layer();
        }
        
        setup();
        
        /*
        let canvas = document.getElementById("my_canvas");
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "#FF0000";
        ctx.fillRect(0, 0, 150, 75);
/*
        console.log(btoa("iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="));
        console.log(atob("iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="));
        // console.log(hex("iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="))

        let x= atob("iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==");
        for (let i = 0; i < x.length; i++) {
            console.log(x.charAt(i));
            console.log(x.charAt(i).charCodeAt(0).toString(16));
            console.log(x.charAt(i).charCodeAt(0));

        }
        var canvas = document.createElement("canvas");


canvas.width = 200;
canvas.height = 200;
/*
canvas

var url = canvas.toDataURL();

var a = document.createElement('a');
a.download = 'my.png';
a.href = url;
a.textContent = 'Download PNG';

let ctx = canvas.getContext('2d');

ctx.fillStyle = '#F0DB4F';
    ctx.strokeStyle = 'red';

    // draw a rectangle with fill and stroke
    ctx.fillRect(50, 50, 150, 100);
    ctx.strokeRect(50, 50, 150, 100);

document.body.appendChild(a);
*/
    </script>
</body>
</html>